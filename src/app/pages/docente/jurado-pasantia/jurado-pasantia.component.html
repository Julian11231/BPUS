<div class="p-3" style="background-color: white;">
    <div class="modal fade" id="infoPasantia">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                            <h5><b>Titulo:</b> &nbsp; {{pasantiaSelected?.titulo}}</h5>
                        </div>
                        <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                            <h5><b class="text-uppercase">ID:</b> &nbsp; {{pasantiaSelected?._id}}</h5>
                        </div>
                    </div>
                    
                    <div *ngIf="pasantiaSelected?.fecha_actaInicio" class="row mt-2">
                        <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                            <h5><b>Fecha inicio: </b>{{pasantiaSelected?.fecha_actaInicio}}</h5>
                        </div>
                        <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                            <h5><b>Semana: </b>{{pasantiaSelected?.semanas}}/24</h5>
                        </div>
                    </div>
                    <h5 class="mt-2"><b>Director: </b>{{pasantiaSelected?.tutor.nombres}} {{pasantiaSelected?.tutor.apellidos}}</h5>
                    <h5 class="mt-3"><b>Descripción:</b></h5>
                    <p class="px-3 text-justify" id="descripcionPasantia">{{pasantiaSelected?.descripcion}}</p>
                    <h5 class="mt-3"> <b>Documentos:</b></h5>
                    <div class="buttons py-2 px-5">
                        <a class="btn btnSuccess descargar mr-4" [href]="pasantiaSelected?.documento_informeFinal | documento: pasantiaSelected?.estudiante._id" download="pasantiaSelected?.documento_informeFinal" target="_blank">
                            <small><b>Informe final</b></small>
                        </a>
                        <a class="btn btnSuccess descargar" [href]="pasantiaSelected?.documento_aprobacionEmpresa | documento: pasantiaSelected?.estudiante._id" download="pasantiaSelected?.documento_aprobacionEmpresa" target="_blank">
                            <small><b>Aprobación empresa</b></small>
                        </a>
                    </div>
                    <h5 class="mt-3"> <b>Información del estudiante:</b></h5>
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-5 col-lg-5">
                            <i class="fa fa-user-circle-o"></i> &nbsp; <small class="text-uppercase">{{ pasantiaSelected?.estudiante.nombres }} {{pasantiaSelected?.estudiante.apellidos}}</small>
                        </div>
                        <div class="col-12 col-sm-12 col-md-4 col-lg-4">
                            <i class="fa fa-id-card"></i> &nbsp; <small class="text-justify">Cód:&nbsp; {{pasantiaSelected?.estudiante.codigo}}</small>
                        </div>
                        <div class="col-12 col-sm-12 col-md-3 col-lg-3">
                            <i class="fa fa-id-card-o"></i> &nbsp; <small class="text-justify">ID:&nbsp; {{pasantiaSelected?.estudiante.identificacion}}</small>
                        </div>
                    </div><br>
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-5 col-lg-5">
                            <i class="mdi mdi-email"></i> &nbsp;<small class="text-justify">Correo:&nbsp; {{pasantiaSelected?.estudiante.correo}}</small>
                        </div>
                        <div class="col-12 col-sm-12 col-md-4 col-lg-4">
                            <i class="fa fa-phone"></i> &nbsp; <small class="text-justify">Tél:&nbsp; {{pasantiaSelected?.estudiante.telefono}}</small>
                        </div>
                        <div class="col-12 col-sm-12 col-md-3 col-lg-3">
                            <i class="fa fa-phone"></i> &nbsp; <small class="text-justify">EPS:&nbsp; {{pasantiaSelected?.estudiante.eps}}</small>
                        </div>
                    </div>
                    <ng-container *ngIf="pasantiaSelected?.vacante">
                        <h5 class="mt-3"> <b>Información de la vacante:</b></h5>
                        <div class="row">
                            <div class="col-12 col-sm-12 col-md-7 col-lg-7">
                                <div class="vacantesInfo">
                                    <small><i class="fa fa-briefcase"></i> &nbsp; {{pasantiaSelected?.vacante.titulo}} - {{pasantiaSelected?.empresa.nombre}} </small><br>
                                    <small><i class="fa fa-globe"></i> &nbsp; {{pasantiaSelected?.vacante.ubicacion}}, &nbsp;{{pasantiaSelected?.vacante.modalidad}}</small><br>
                                    <small><i class="fa fa-code"></i> &nbsp; {{pasantiaSelected?.vacante.funciones}}</small><br>
                                    <small><i class="fa fa-money"></i>  &nbsp; Pagada: &nbsp;{{pasantiaSelected?.vacante.pagada}}</small><br>
                                </div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-5 col-lg-5">
                                <h5 class="text-uppercase"> <b>Persona a Cargo:</b></h5>
                                <i class="fa fa-user"></i> &nbsp; <small class="text-justify"> {{pasantiaSelected?.vacante.encargado.nombre}}</small><br>
                                <i class="mdi mdi-email"></i> &nbsp;<small class="text-justify">{{pasantiaSelected?.vacante.encargado.correo}}</small><br>
                                <i class="fa fa-phone"></i> &nbsp;<small class="text-justify"> {{pasantiaSelected?.vacante.encargado.telefono}}</small>
                            </div>
                        </div>
                        <div class="mt-3 ml-4">
                            <h5 class="text-uppercase"> <b>Descripción:</b></h5>
                            <p class="mt-2 ml-2">{{pasantiaSelected?.vacante.descripcion}}</p> 
                        </div>
                    </ng-container>
                    <ng-container *ngIf="!pasantiaSelected?.vacante">
                        <h5 class="mt-3"> <b>Información de la empresa:</b> </h5>
                        <div class="row my-3">
                            <div class="col-12 col-sm-12 col-md-3 col-lg-3">
                                <small><i class="fa fa-briefcase"></i> &nbsp;{{pasantiaSelected?.empresa.nombre}} </small>
                            </div>
                            <div class="col-12 col-sm-12 col-md-3 col-lg-3">
                                <small><i class="fa fa-globe"></i> &nbsp; {{pasantiaSelected?.empresa.ciudad}}, &nbsp;{{pasantiaSelected?.empresa.direccion}}</small>
                            </div>
                            <div class="col-12 col-sm-12 col-md-3 col-lg-3">
                                <small><i class="fa fa-phone"></i> &nbsp; {{pasantiaSelected?.empresa.telefono}}</small>
                            </div>
                            <div class="col-12 col-sm-12 col-md-3 col-lg-3">
                                <small><i class="fa fa-money"></i> &nbsp;{{pasantiaSelected?.empresa.naturaleza}}</small>
                            </div>    
                        </div>
                    </ng-container>
                    <div class="modal-footer">
                        <button type="button" class="btn btnSuccess" data-dismiss="modal">Cerrar <i class="fa fa-times"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="evaluarPasantia">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-body">
                    <h2>Evaluar pasantia</h2>
                    <hr>
                    <form ngNativeValidate #updateInformes="ngForm" (ngSubmit)="evaluarPasantia(updateInformes)">
                        <div class="buttons mt-4">
                            <label class="font-weight-bold text-dark mr-3">Estado: </label>
                            <select (change)="notasJurado();" name="evaluacion_jurado" [(ngModel)]="evaluacion_jurado" class="custom-select">
                                <option value="">Seleccionar...</option>
                                <option value="Aprobada">Aprobada</option>
                                <option value="Ajustar">Ajustar</option>
                            </select>
                            <button type="button" class="btn btn-info ml-3" data-toggle="collapse" data-target="#notas_jurado">Agregar notas</button>
                        </div>

                        <br>
                        <label class="font-weight-bold text-dark my-3 mr-3">Documento evaluación jurado: </label>
                        <div class="mb-3 px-5 text-center">
                            <label for="documento_evaluacion_jurado" *ngIf="nombreArchivoEvaluacion == null" class="labels custom-file-upload p-4">
                                Click aquí para subir el documento de evaluación
                            </label>
    
                            <label for="documento_evaluacion_jurado" *ngIf="nombreArchivoEvaluacion != null" class="labels custom-file-upload text-center p-4" style="color: #8F141B; font-weight: bold;">
                                {{ nombreArchivoEvaluacion }}
                            </label><br>
    
                            <small class="font-italic">Recuerda que debe ser un archivo PDF, de tamaño menor a 1 MB.</small><br>
                        
                            <input ngModel #documentoJurado="ngModel" name="documento_jurado" id="documento_evaluacion_jurado" (change)="getFileEvaluacion($event.target.files[0])" type="file" accept="application/pdf" class="imagenes-secundarias" required />
                        </div> 
                        <div id="notas_jurado" class="collapse">
                            <div class="form-group px-3">
                                <label class="font-weight-bold text-dark" for="comment">Notas: <span *ngIf="evaluacion_jurado == 'Ajustar'">(requerido)</span></label>
                                <textarea [(ngModel)]="notas_jurado" name="notas_jurado" class="form-control" rows="3" id="comment" maxlength="300"></textarea>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button id="btnCerrar" type="button" (click)="clearDataInfo(); documentoJurado.reset();" class="btn btnSuccess" data-dismiss="modal">Cerrar <i class="fa fa-times"></i></button>
                            <button type="submit" class="btn btnInfo" [disabled]="evaluacion_jurado === '' || nombreArchivoEvaluacion == null || (evaluacion_jurado === 'Ajustar' && notas_jurado === '')">Evaluar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <ng-container *ngFor="let dato of pasantias">
        <ng-container *ngIf="(dato.jurado1 == user._id && !dato.evaluacion_jurado1) || (dato.jurado2 == user._id && !dato.evaluacion_jurado2)">
            <div class="row">
                <div class="col-lg-9">
                    <div class="vacantes">
                        <h5 class="text-uppercase"> 
                            <b>{{ dato.estudiante.nombres }} {{ dato.estudiante.apellidos }}</b>
                        </h5>
                        <h5><b>{{ dato.empresa.mombre }}</b></h5>
                        <h5><small><b>Fecha de sustentación: </b>{{ dato.sustentacion_fecha }}</small></h5>
                        <h5><small><b>Lugar de sustentación: </b>{{ dato.sustentacion_lugar }}</small></h5>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="buttons mt-4">
                        <button class="btn btn-outline-info btn-sm mr-2" (click)="getDataInfo(dato)" data-toggle="modal" data-target="#infoPasantia" data-backdrop="static"><i class="fa fa-info-circle"></i></button>
                        <button type="button" (click)="getDataInfo(dato)" data-toggle="modal" data-target="#evaluarPasantia" data-backdrop="static" class="btn btnInfo">
                            <b>Evaluar</b>
                        </button>
                    </div>
                </div>
            </div>
            <hr>
        </ng-container>
    </ng-container>  
    
</div>
